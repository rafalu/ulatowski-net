name: Trigger Vercel Deployment

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Vercel Deploy Hook
        run: |
          # Use a repository secret for the deploy hook URL so it can be rotated
          # without changing the workflow. Set secret `VERCEL_DEPLOY_HOOK` to the
          # full URL (e.g. https://api.vercel.com/v1/integrations/deploy/<PROJECT_ID>/<HOOK_ID>)
          if [ -z "${{ secrets.VERCEL_DEPLOY_HOOK }}" ]; then
            echo "ERROR: VERCEL_DEPLOY_HOOK secret is not set" >&2
            exit 1
          fi
          curl -fsS -X POST "${{ secrets.VERCEL_DEPLOY_HOOK }}"
